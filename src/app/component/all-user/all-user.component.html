
<h4>Все участники</h4>
<table>
  <tbody>
    <tr *ngFor="let user of allUsers; let i = index">
      <td>
        <div class="img-container"><img [src]="user.image || 'img/no-avatar.gif' "/>
          <div (click)="startChat(user)" [ngClass]="{'chat-un-viewed': user.chatUnViewed && user.chatUnViewed.length}" title="отправить личное сообщение" class="ico-chat"></div>
          <div *ngIf="user.chatUnViewed && user.chatUnViewed.length" class="ico-un-viewed">{{user.chatUnViewed.length}}</div>
        </div>
      </td>
      <td>
        <div class="name pointer" (click)="onUserClick(user)">{{user.name}}</div>
        <div class="last-visit">Last visit {{user.lastVisit | date: 'dd/MM/yyyy HH:mm:ss'}}</div>
      </td>
      <td>
        <div *ngIf="!isFriend(user)" class="invite">
          <ng-template [ngIf]="!isInviteActive(user)">
            <div (click)="sendInvite(user)">Отправть запрос</div>
          </ng-template>
          <ng-template [ngIf]="isInviteActive(user)">
            <div (click)="onCancelInvite(user)">Запрос отправлен (отменить)</div>
          </ng-template>
        </div>
      </td>
    </tr>
  </tbody>
</table>
